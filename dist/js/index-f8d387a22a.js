function login(s){var i=$("#username").val(),e=$("#ymz").val();console.log(isPhoneNo(i)),isPhoneNo(i)?""==e?$("#tips2").css("visibility","visible").html("请输入验证码"):$.ajax({type:"post",url:s+"/driver/login.json",data:{username:i,validateCode:e},dataType:"json",success:function(s){if(console.log(s),"用户不存在"==s.msg)$("#tips1").css("visibility","visible").html(s.msg),$("#tips2").css("visibility","hidden").html("");else if("成功"==s.msg){var i=s.nickname,e=s.score,t=s.userId,l=s.userImg;localStorage.setItem("nickname",i),localStorage.setItem("score",e),localStorage.setItem("driverId",t),localStorage.setItem("userImg",l),window.location.href="index.html"}else $("#tips1").css("visibility","visible").html(s.msg),$("#tips2").css("visibility","hidden").html("")}}):$("#tips1").css("visibility","visible").html("请输入正确的手机号码")}function getLoginSMS(s){var i=$("#username").val();if(console.log(isPhoneNo(i)),isPhoneNo(i)){$("#tips1").css("visibility","hidden");var e=60;$("#send-yzm").addClass("disabled");var t=setInterval(function(){e-=1,$("#send-yzm").html(e)},1e3);setTimeout(function(){$("#send-yzm").html("点击发送验证码").removeClass("disabled"),window.clearInterval(t)},6e4),$.ajax({type:"post",url:s+"/driver/getLoginSMS.json",dataType:"json",data:{username:i},success:function(s){s.msg},error:function(){}})}else $("#tips1").css("visibility","visible").html("请输入正确的手机号码")}function isPhoneNo(s){return/^1[34578]\d{9}$/.test(s)}