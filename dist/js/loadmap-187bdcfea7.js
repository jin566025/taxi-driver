var map,geolocation;(map=new AMap.Map("container",{resizeEnable:!0})).plugin("AMap.Geolocation",function(){geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),map.addControl(geolocation),geolocation.getCurrentPosition(),AMap.event.addListener(geolocation,"complete",onComplete)});var driving=new AMap.Driving({map:map,panel:"panel"});function onComplete(t){sessionStorage.setItem("driverLng",t.position.getLng()),sessionStorage.setItem("driverLat",t.position.getLat()),AMap.event.addListener(auto,"select",select),$("#tipinput").attr("disabled",!1)}var auto=new AMap.Autocomplete({input:"tipinput"});function select(t){t.poi&&t.poi.location&&(map.setZoom(15),map.setCenter(t.poi.location),sessionStorage.setItem("targetLng",t.poi.location.lng),sessionStorage.setItem("targetLat",t.poi.location.lat)),targetLng=t.poi.location.lng,targetLat=t.poi.location.lat;var e=sessionStorage.getItem("driverLng"),o=sessionStorage.getItem("driverLat");driving.search(new AMap.LngLat(e,o),new AMap.LngLat(targetLng,targetLat)),setTimeout(function(){var t=$(".planTitle p").text(),e=new RegExp("\\((.| )+?\\)","igm");$("#position1").html(t.match(e))},1e3)}